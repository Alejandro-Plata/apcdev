<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200&icon_names=menu" />
    <link rel="shortcut icon" href="../assets/img/logoExc.png" type="image/x-icon">
    <link rel="stylesheet" href="../styles/styles.css">
    <script src="../script.js" defer></script>
    <title>Excepciones</title>
</head>
<body>
    <div class="wrapper">
  
      <header>
        <nav class="barra-nav">

          <ul>
            <li class="material-symbols-outlined">
              menu
            </li>
            <li><a href="#Seccion1">Inicio</a></li>
            <li><a href="#Seccion2">Seccion2</a></li>
            <li><a href="#Seccion3">Seccion3</a></li>
            <li><a href="#Seccion4">Seccion4</a></li>
          </ul>

        </nav>
      </header>
      <div class="modal">
        <header class="encabezado-principal">
          <li class="material-symbols-outlined">
            menu
          </li>
        </header>
        <details open name="temario" >
          <summary class="introduccion-sum"><a href="">Introducción</a></summary>
        </details>

        <details name="temario">
          <summary>Temario escrito</summary>
          <ul>
            <a href="temario/excepciones.html">
              <li>Excepciones</li> 
              </a>
            <a href="">
              <li>Interfaces</li> 
            </a>
            <a href="">
             
            <a href="">
              <li>Colecciones</li>
            </a>
          </ul>
        </details>
        <details name="temario">
          <summary>Temario en vídeos</summary>

          <ul>
            <a href="">
              <li>Excepciones</li> 
              </a>
            <a href="">
              <li>Interfaces</li> 
            </a>
            <a href="">
             
            <a href="">
              <li>Colecciones</li>
            </a>
          </ul>
        </details>
        <details name="temario">
          <summary>Base de datos</summary>

          <ul>
            <a href="BD/dql.html">
              <li>Consultas simples</li> 
              </a>
            <a href="">
              <li>Subconsultas, Join y optimización de consultas</li> 
            </a>
          </ul>
        </details>
      </div>
        <aside>
          <header class="encabezado-principal">
            <div class="ep-logo"></div>
            <div class="ep-titulo">
              <h1>Recursos para aprender Java</h1>
              <h2>Excluídos caprinos y gorrinos</h2>
            </div>
          </header>
          <details open name="temario" >
            <summary class="introduccion-sum"><a href="../index.html">Introducción</a></summary>
          </details>
  
          <details name="temario">
            <summary>Temario escrito</summary>
            <ul>
              <a href="">
                <li>Excepciones</li> 
                </a>
              <a href="">
                <li>Interfaces</li> 
              </a>
              <a href="">
               
              <a href="">
                <li>Colecciones</li>
              </a>
            </ul>
          </details>
          <details name="temario">
            <summary>Temario en vídeos</summary>
  
            <ul>
              <a href="">
                <li>Excepciones</li> 
                </a>
              <a href="">
                <li>Interfaces</li> 
              </a>
              <a href="">
               
              <a href="">
                <li>Colecciones</li>
              </a>
            </ul>
          </details>
        <details>
          <summary>Base de datos</summary>

          <ul>
            <a href="../BD/dql.html">
              <li>Consultas simples</li> 
              </a>
            <a href="">
              <li>Subconsultas, Join y optimización de consultas</li> 
            </a>
          </ul>
        </details>
        </aside>
  
        <main class="contenido-principal">
          <h1>⚠️ Excepciones ⚠️</h1>
        
          <p>Si te has dado cuenta, a pesar de que tu código funciona perfectamente, habrá situaciones en las que se produzcan errores. Por ejemplo, si asignamos <span class="negrita">null</span> a una variable y luego tratamos de acceder a alguno de los atributos o métodos que tiene esa variable, nos encontraremos que en vez de ejecutarse código se produce un error bastante temerario que muestra bastantes líneas de código y que interrumpe la ejecución del programa. Esta interrupción de la ejecución del programa se conoce como <span class="negrita">excepción</span>.

            <section class="card-cod">

              <header class="card-cod-header">
                  <div class="card-titulo">
                  <h2>NullPointer Exception</h2>
                  <h3>Ejemplo de excepción en Java</h3>
                  </div>
                  <div>
                      <img class="card-icon" src="../assets/img/logo.png" alt="Imagen card">
                  </div>
              </header>
              <footer class="card-cod-footer">
                  
                  <div class="card-cod-codigo">
                      <pre>
    
    public class <span class="reservada">Main</span> {

      public static void <span class="reservada">main</span> (String[] args) {

        <span class="reservada">String</span> persona = <span class="var">null</span>;
        <span class="reservada">String</span> mayus = persona.<span class="var">toUpperCase()</span>;
        <span class="reservada">System.out.println</span>(<span class="var">mayus</span>);

      }

    }
                      </pre>
                  </div>
              </footer>
            </section>  

          <h2>Cómo manejar excepciones</h2>
          <p>Para manejar excepciones, es decir, evitar que nuestro programa se comporte de forma rara y pueda causar daños mayores, generalmente es buena idea hacer que este pete (en términos más apropiados, manejar la excepción suele conllevar detener abruptamente la ejecución de nuestro programa). Para ello, utilizamos una estructura en apariencia similar a un if-else pero que tiene bastantes particularidades que la hacen extremadamente útil.</p>
          <p>Esta es la estructura <span class="negrita">try {} catch (Exception e) {}</span> que utilizamos para manejar las excepciones.</p>

          <section class="card-cod">

            <header class="card-def-header">
                <div class="card-titulo">
                <h2>Bloque try - catch</h2>
                </div>
                <div>
                    <img class="card-def-icon" src="../assets/img/logo.png" alt="Imagen card">
                </div>
            </header>
            <footer class="card-cod-footer">
                
             <p>La palabra reservada <span class="reservada">try</span> inicia un bloque que contiene código que <span class="negrita">podría lanzar una excepción</span>. Es decir, el código potencialmente problemático se contiene dentro del bloque try.</p> 
             <p>Por otra parte, el bloque <span class="reservada">catch</span> define <span class="negrita">qué ocurre si el bloque try lanza una excepción</span>. <span class="reservada">Catch</span> va de la mano del <span class="negrita">tipo de excepción</span> que maneja el bloque try - catch, por ejemplo "todas las excepciones que existen en el lenguaje de programación Java": <span class="negrita">catch (<span class="var">Exception</span> e)</span>.</p>  
          
             <div class="card-cod-codigo">
              <pre>

  <span class="reservada">try</span> {
    <span class="comentario">//Código que podría lanzar una excepción</span>
  }
  <span class="reservada">catch</span> (<span class="var">Exception e</span>) {
    <span class="comentario">//Bloque de código que se ejecuta si se lanza 
      una excepción</span>
  }  
              </pre>
          </div>

            </footer>
          </section> 

          <p>Existe un tipo de bloque try - catch especial orientado al cierre de archivos o peticiones asíncronas, como por ejemplo la petición de datos a una base de datos o la lectura de un fichero. Ambos procesos inician y no terminan hasta que se cierra su flujo. Para cerrarlos correctamente, independientemente de si hay un error durante el proceso y la ejecución del programa se detiene, se utiliza una estructura denominada <a href=""><span class="negrita">try-with</span></a> que explicaré en la sección de <span class="negrita">lectura y escritura de ficheros</span>.</p>

      <h2>Tipos de excepciones</h2>
        <p>Algo que puede resultarnos contraintuitivo al principio que todas las excepciones que han sucedido en nuestro programa durante el tiempo que llevamos programando <span class="negrita">no han necesitado ser tratadas.</span> Esto es debido a que no todas las excepciones son iguales y su variedad nos permite acotar cuál es el problema que tiene nuestro código, facilitando su solución. Justo lo contrario a lo que hace MariaDB 🤪.</p>
        <p>El tipo de excepciones al que estamos más acostumbrados son las <span class="var">excepciones en tiempo de ejecución</span> mejor conocidas como <span class="negrita">RunTimeExceptions.</span> Este tipo de excepciones se <span class="reservada">lanzan</span> sin que nosotros tengamos que hacer nada, ya que se deben a <span class="negrita">errores de programación</span> que pueden ser evitados simplemente programando correctamente.</p>
        <p>Veamos un ejemplo: </p>

        <section class="card-cod">

          <header class="card-cod-header">
              <div class="card-titulo">
              <h2>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Try - catch</h2>
              <h3>Cuando es necesario utilizarlo</h3>
              </div>
              <div>
                  <img class="card-icon" src="../assets/img/logo.png" alt="Imagen card">
              </div>
          </header>
          <footer class="card-cod-footer">
              <h3 class="error">Mal 🔥</h3>
              <div class="card-cod-codigo">
                  <pre>

public class <span class="reservada">Main</span> {

  public static void <span class="reservada">main</span> (String[] args) {

    <span class="reservada">String</span> persona = <span class="var">null</span>;
    <span class="reservada">String</span> mayus = persona.<span class="var">toUpperCase()</span>;
    <span class="reservada">System.out.println</span>(<span class="var">mayus</span>);

  }

}
                  </pre>
              </div>

              <h3 class="acierto">Bien ✔️</h3>
              <div class="card-cod-codigo">
                  <pre>

public class <span class="reservada">Main</span> {

  public static void <span class="reservada">main</span> (String[] args) {

    <span class="reservada">String</span> persona = <span class="var">null</span>;
    <span class="reservada">String</span> mayus = persona.<span class="var">toUpperCase()</span>;
    <span class="reservada">System.out.println</span>(<span class="var">mayus</span>);

  }

}
                  </pre>
              </div>

          </footer>
        </section>  

        <p>Todas las excepciones heredan de la clase <span class="reservada">Throwable</span>. Más concretamente, de la clase exception heredan 2 subclases principales, que son <span class="negrita">Error y Exception.</span></p>
        
          <p>La clase <span class="reservada">Error</span> no es una excepción, pero al igual que las excepciones se puede lanzar (de ahí que herede de <span class="var">Throwable</span>). Cuando ocurre un error, la máquina virtual de Java se detiene, porque es una situación tan especial que no podemos hacer nada al respecto. Un ejemplo de errores de esta clase podría ser que el ordenador <span class="var">se quedase sin memoria</span>. Si el ordenador se queda sin memoria y no puedes seguir ejecutando código, no tiene sentido tratar el error, ni siquiera podrías declarar una variable para tratar el error.</li></p>
          <p>La clase <span class="reservada">Exception</span> por su parte está destinada a errores que sí pueden ser tratados, ya que no son errores catastróficos. Una de las subclases más importantes de Exception es <span class="negrita">RunTimeException.</span></p>
       

        <section class="card-cod">

          <header class="card-def-header">
              <div class="card-titulo">
              <h2>RunTimeException</h2>
              </div>
              <div>
                  <img class="card-def-icon" src="../assets/img/logo.png" alt="Imagen card">
              </div>
          </header>
          <footer class="card-cod-footer">
              
           <p><span class="negrita">RunTimeException es una subclase de Exception</span> que representa excepciones que ocurren <span class="reservada">durante la ejecución del programa</span>, generalmente debido a <span class="negrita">errores de lógica o uso incorrecto del código</span> (como dividir por cero o acceder a un índice fuera de rango).

            Es útil porque permite identificar problemas que <span class="var">podrían evitarse con una mejor programación</span>.
            
            Su principal diferencia con otras subclases de Exception (como IOException) es que <span class="negrita"> las RunTimeException son no chequeadas (unchecked)</span>, lo que significa que el compilador no obliga a manejarlas o declararlas, mientras que las excepciones chequeadas sí requieren un manejo explícito (try-catch o throws).</p>  

          </footer>
        </section> 

        <h2>Que otro se coma el marrón</h2>
        
        <p>En Java, cuando escribimos código, a veces surgen situaciones excepcionales que no podemos evitar dentro de un método específico, como un error matemático o un problema con datos que no controlamos directamente. En estos casos, <span class="negrita">podemos decidir no resolver el problema en el lugar exacto donde ocurre</span>, sino pasar la tarea de lidiar con ese problema a quien esté usando nuestro código. Esto se logra indicando que nuestro método <span class="var">puede generar un error</span> y dejando que el código que lo llama decida qué hacer al respecto.

          Pongamos un ejemplo práctico: imagina que estás creando una <span class="negrita">función para calcular el promedio de una lista de números</span>. Si la lista está <span class="reservada">vacía</span>, no hay forma de calcular un promedio válido, y eso es un problema. Podrías intentar solucionarlo dentro de la función, pero quizás no sabes qué hacer en ese caso: ¿deberías devolver un valor por defecto, mostrar un mensaje de error o detener el programa? En lugar de tomar esa decisión tú, puedes <span class="reservada">"pasarle el marrón" a otro</span> avisando que este problema podría ocurrir y dejar que quien use tu función decida cómo manejarlo.</p>

          <section class="card-cod">

            <header class="card-cod-header">
                <div class="card-titulo">
                <h2>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Promedio</h2>
                <h3>Ejemplo del uso de throws en Java</h3>
                </div>
                <div>
                    <img class="card-icon" src="../assets/img/logo.png" alt="Imagen card">
                </div>
            </header>
            <footer class="card-cod-footer">
                
                <div class="card-cod-codigo">
                    <pre>
  
  <span class="reservada">public class</span> <span class="var">Promedio</span> {

    <span class="reservada">public double</span> <span class="var">calcularPromedio</span>(<span class="reservada">int</span>[] numeros) <span class="negrita">throws</span> 
    IllegalArgumentException {
      <span class="reservada">if</span> (numeros.length == <span class="var">0</span>) {
        <span class="reservada">throw new</span> 
        IllegalArgumentException(<span class="var">"La lista no puede estar 
          vacía"</span>);
      }
      <span class="reservada">int</span> suma = 0;
      <span class="reservada">for</span> (<span class="reservada">int</span> num: numeros) {
        suma += num;
      }
      <span class="reservada">return</span> (<span class="reservada">double</span>) suma / numeros.length;
    }

    <span class="reservada">public static void</span> <span class="var">main</span> (String[] args) {

      Promedio prom = <span class="reservada">new</span> Promedio(); 
      <span class="reservada">int</span> listaVacia = {};

      <span class="reservada">try</span> {
        <span class="reservada">double</span> resultado = prom.calcularPromedio
                                    (<span class="var">listaVacia</span>);
        System.out.println(<span class="var">"El promedio es: "</span> + resultado);
      } <span class="reservada">catch</span> (IllegalArgumentException e) {
        System.out.println(<span class="var">"Ocurrió un problema: "</span> + 
        e.getMessage()); <span class="comentario">/* e.getMessage() muestra un 
          pequeño mensaje de error relacionado con la 
          excepción que se ha lanzado */</span>
      }

    }

  }
                    </pre>
                </div>

                <p>En este caso, el método calcularPromedio no intenta resolver el problema de una lista vacía. En lugar de eso, <span class="negrita">lanza una excepción <span class="var">(IllegalArgumentException)</span> para señalar que algo salió mal.</span>  Al usar throws en la declaración del método, estás haciendo que quién sea que llame a ese método se va a tener que encargar de <span class="negrita">decidir qué hacer con el error.</span> Entonces, en main, el código que usa calcularPromedio tiene que prepararse para esa posibilidad y decidir cómo responder, en este caso usando <span class="reservada">un try-catch</span>  para capturar el error y mostrar un mensaje.</p>
            </footer>
          </section>  

          <h2>Cómo lanzar exepciones con <span class="negrita">throw</span></h2>
          <p>Esto es algo básico pero fundamental: cuando algo falla en tu programa y quieres señalarlo explícitamente, usas throw seguido de una instancia de una clase de excepción, como throw new NumberFormatException(). Por ejemplo, si intentas convertir una cadena como "abc" a un número entero, puedes lanzar esa excepción para indicar que el formato es inválido.</p>

        </main>
  
        <footer class="pie-pag">
          <nav>
              <ul>
                  <a href="">
                      <li>Introducción</li>
                  </a>
                  <a href="">
                      <li>Ejercicios</li>
                  </a>
                  <a href="">
                      <li>Git</li>
                  </a>
                  <a href="https://www.youtube.com/watch?v=qxXcI56NfnE&t=8384s">
                      <li>Java desde cero</li>
                  </a>
              </ul>
          </nav>
          <h2>
            &copy; Me reservo el derecho a insultarte por no saber programar
          </h2>
        </footer>
      </div> 
</body>
</html>